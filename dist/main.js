(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var o=i.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&!e;)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=[{url:t.p+"images/black-friday-banner.1b337ae6ff41844a33a5.png"},{url:t.p+"images/top-10-banner.81dae744e32af5b64c4a.png"},{url:t.p+"images/cozy-books-banner.b62ead6875579370ce04.png"}],i=document.querySelector(".slider-images"),o=document.querySelector(".slider-dots");function r(t){i.querySelector(".active").classList.remove("active"),i.querySelector(".n"+t).classList.add("active"),o.querySelector(".active").classList.remove("active"),o.querySelector(".n"+t).classList.add("active")}const s=t.p+"images/Star-yellow.e376cccbc8f00d095ff1.svg",n=t.p+"images/Star-white.b7733d7fef79909394bf.svg";class a{constructor(t,e){this.data=t,this.cover=t.volumeInfo.imageLinks?.thumbnail||"/PNG/default-book-cover.png",this.authors=t.volumeInfo.authors,this.title=t.volumeInfo.title,this.rating=t.volumeInfo.averageRating,this.ratingCount=t.volumeInfo.ratingsCount,this.description=t.volumeInfo.description,this.price=t.saleInfo.retailPrice,this.item=document.querySelector(".book-card-template").content.cloneNode(!0),this.config=e,this.inCart=!1,this.buyButton=this.item.querySelector(".library-button"),this.id=t.id}fillData(){this.ratingCount&&this.rating?(this.item.querySelector(".book-card__rating_reviews").textContent=this.ratingCount+" review",this.fillStars()):(this.item.querySelector(".book-card__rating").remove(),this.ratingCount=null,this.rating=null),(JSON.parse(localStorage.getItem("buyButton"))||[]).forEach((t=>{this.inCart=this.id===t.id?t.inCart:this.inCart})),this.inCart?(this.buyButton.classList.add("in-the-cart-button"),this.buyButton.textContent="in the cart"):this.price||(this.buyButton.disabled=!0,this.buyButton.classList.add("in-the-cart-button"),this.buyButton.textContent="not for sale",this.buyButton.style.cursor="default"),this.item.querySelector(".book-card__cover-image").src=this.cover,this.item.querySelector(".book-card__text_author").textContent=this.authors?.join(", "),this.item.querySelector(".book-card__text_title").textContent=this.title,this.item.querySelector(".book-card__text_description-content").textContent=this.description,this.item.querySelector(".book-card__text_price").textContent=this.price?`${this.price.amount} ${this.price.currencyCode}`:"NOT FOR SALE"}fillStars(){const t=this.item.querySelector(".book-card__rating_stars");for(let e=1;e<=5;e++)e<=Math.round(this.rating)?t.innerHTML+=`<img class="star-icon" src=${s} alt="Star-yellow">`:t.innerHTML+=`<img class="star-icon" src=${n} alt="Star-white">`}addToCart(){this.buyButton.classList.toggle("in-the-cart-button");const t=document.querySelector(".cart-counter");this.inCart?(this.buyButton.textContent="buy now",this.config.cart--):(this.buyButton.textContent="in the cart",this.config.cart++),this.inCart=!this.inCart,t.textContent=this.config.cart,0==+this.config.cart?t.style.display="none":t.style.display="block",this.setLocalStorage()}setLocalStorage(){let t=JSON.parse(localStorage.getItem("buyButton"))||[];t.length&&(t=t.filter((t=>this.id!==t.id))),t.push({id:this.id,inCart:this.inCart}),localStorage.setItem("cart",this.config.cart.toString()),localStorage.setItem("buyButton",JSON.stringify(t))}render(){this.buyButton.addEventListener("click",(()=>{this.addToCart()})),this.fillData(),document.querySelector(".book-list").append(this.item)}}const c={end:6,cart:+localStorage.getItem("cart")||0},l=new class{getBooks(t=6,e="Architecture"){return fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${e}"&key=AIzaSyBUarFRhwharvvrJeC2ZInNHv6koojssmM&printType=books&startIndex=0&maxResults=${t}&langRestrict=en`).then((t=>t.ok?t.json():Promise.reject(t.status)))}},u=new class{constructor(t,e,i){this.render=e,this.bookList=document.querySelector(".book-list"),this.category="Architecture",this.setBooks=t,this.config=i}setListeners(){const t=document.querySelector(".load-more-button");document.querySelectorAll(".category-list__link").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.category=e.target.dataset.category,this.config.end=6,t.style.display="block",this.setBooks(this.category),document.querySelector(".category-list__item.active").classList.remove("active"),e.target.parentNode.classList.add("active")}))})),t.addEventListener("click",(t=>{this.config.end+6>40?(this.config.end+=40-this.config.end,t.target.style.display="none"):this.config.end+=6,this.setBooks(this.category)}))}renderBooks(t){console.log(t),this.bookList.innerHTML="",t.forEach((t=>{this.render(t)}))}}((function(t){l.getBooks(c.end,t).then((({items:t})=>{u.renderBooks(t)})).catch((t=>{console.log(t)}))}),(function(t){new a(t,c).render()}),c),h=document.querySelector(".cart-counter");u.setListeners(),h.textContent=localStorage.getItem("cart")||0,0==+h.textContent?h.style.display="none":h.style.display="block",u.setBooks("Architecture"),document.addEventListener("DOMContentLoaded",(function(){e&&e.length&&(e.forEach(((t,o)=>{const r=`<div class="image n${o} ${0===o?"active":""}" style="background-image:url(${e[o].url});" data-index="${o}"></div>`;i.innerHTML+=r})),e.forEach(((t,e)=>{const i=`<div class="slider__dots-item n${e} ${0===e?"active":""}" data-index="${e}"></div>`;o.innerHTML+=i})),o.querySelectorAll(".slider__dots-item").forEach((t=>{t.addEventListener("click",(function(){r(this.dataset.index),o.querySelector(".active").classList.remove("active"),this.classList.add("active")}))})),setInterval((()=>{const t=+i.querySelector(".active").dataset.index;r(t===e.length-1?0:t+1)}),5e3))}))})();